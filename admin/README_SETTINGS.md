# صفحة إعدادات المتجر
## Store Settings Page

### الوصف
صفحة شاملة لإدارة جميع إعدادات المتجر الإلكتروني مع واجهة سهلة الاستخدام وميزات متقدمة.

### الميزات الرئيسية

#### 1. الإعدادات العامة
- **اسم المتجر**: تحديد اسم المتجر الذي يظهر في جميع أنحاء الموقع
- **وصف المتجر**: وصف مختصر للمتجر
- **البريد الإلكتروني للمشرف**: البريد الإلكتروني الرئيسي للتواصل
- **رقم الهاتف**: رقم الهاتف للتواصل
- **العنوان**: عنوان المتجر الفعلي

#### 2. إعدادات الشحن والدفع
- **تكلفة الشحن**: التكلفة الافتراضية للشحن
- **حد الشحن المجاني**: المبلغ الذي يحصل العميل عنده على شحن مجاني
- **معدل الضريبة**: نسبة الضريبة المضافة
- **رمز العملة**: الرمز المستخدم لعرض الأسعار

#### 3. إعدادات العرض
- **عدد المنتجات في الصفحة**: عدد المنتجات المعروضة في كل صفحة

#### 4. إعدادات النظام
- **وضع الصيانة**: إخفاء المتجر عن الزوار مؤقتاً
- **السماح بالتسجيل**: السماح للمستخدمين الجدد بإنشاء حسابات
- **تأكيد البريد الإلكتروني**: طلب تأكيد البريد الإلكتروني عند التسجيل

#### 5. معلومات النظام
- عرض معلومات تقنية مفيدة مثل:
  - إصدار PHP
  - خادم الويب
  - حجم الذاكرة
  - حد رفع الملفات
  - معلومات قاعدة البيانات
  - المنطقة الزمنية

### الميزات المتقدمة

#### 1. الحفظ التلقائي
- حفظ تلقائي للإعدادات المهمة عند تغييرها
- إشعارات فورية عند نجاح أو فشل الحفظ

#### 2. تصدير الإعدادات
- تصدير جميع الإعدادات إلى ملف JSON
- يتضمن معلومات التصدير مثل التاريخ وعدد الإعدادات

#### 3. استيراد الإعدادات
- استيراد الإعدادات من ملف JSON
- التحقق من صحة البيانات قبل الاستيراد
- تقرير مفصل عن عملية الاستيراد

#### 4. الأمان
- التحقق من صلاحيات المشرف
- تنظيف وتحقق من صحة البيانات
- حماية من الإعدادات الخطيرة (مثل وضع الصيانة)

### الملفات المتضمنة

1. **admin/settings.php** - الصفحة الرئيسية للإعدادات
2. **admin/ajax/save_setting.php** - حفظ إعداد واحد عبر AJAX
3. **admin/export_settings.php** - تصدير الإعدادات
4. **admin/import_settings.php** - استيراد الإعدادات

### قاعدة البيانات

يتم إنشاء جدول `settings` تلقائياً مع البنية التالية:

```sql
CREATE TABLE settings (
    id INT AUTO_INCREMENT PRIMARY KEY,
    setting_key VARCHAR(255) UNIQUE NOT NULL,
    setting_value TEXT,
    setting_type ENUM('text', 'number', 'boolean', 'email', 'url') DEFAULT 'text',
    description TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);
```

### الاستخدام

1. **الوصول للصفحة**: `/admin/settings.php`
2. **تعديل الإعدادات**: قم بتغيير القيم في النموذج
3. **الحفظ**: اضغط على "حفظ جميع الإعدادات" أو سيتم الحفظ تلقائياً للإعدادات المهمة
4. **التصدير**: اضغط على "تصدير الإعدادات" لتحميل ملف JSON
5. **الاستيراد**: اضغط على "استيراد الإعدادات" واختر ملف JSON

### ملاحظات مهمة

- **وضع الصيانة**: كن حذراً عند تفعيله لأنه سيخفي المتجر عن الزوار
- **البريد الإلكتروني**: تأكد من صحة البريد الإلكتروني للمشرف
- **النسخ الاحتياطي**: قم بتصدير الإعدادات قبل إجراء تغييرات كبيرة
- **الأمان**: لا يتم استيراد إعدادات وضع الصيانة لأسباب أمنية

### التخصيص

يمكن إضافة إعدادات جديدة من خلال:

1. إضافة الإعداد إلى مصفوفة `$allowed_settings`
2. إضافة حقل النموذج في HTML
3. تحديث ملفات AJAX والاستيراد/التصدير

### الدعم الفني

في حالة وجود مشاكل:
1. تحقق من ملفات السجل (error logs)
2. تأكد من صلاحيات قاعدة البيانات
3. تحقق من إعدادات PHP (memory_limit, upload_max_filesize)
